"use strict";(self.webpackChunkmeditation=self.webpackChunkmeditation||[]).push([[307],{8307:function(t,e,n){n.r(e),n.d(e,{default:function(){return w}});var r=n(2791),a=n(9430),s=n(885),u=n(184);function c(t){var e=t.defaultTime,n=(0,r.useState)(e),c=(0,s.Z)(n,2),i=c[0],o=c[1],p=(0,r.useContext)(a.a).dispatch;return(0,u.jsxs)("div",{className:"settings-timer",children:[(0,u.jsxs)("div",{className:"settings-timer__value",children:[i,(0,u.jsx)("span",{children:"\u043c\u0438\u043d."})]}),(0,u.jsx)("input",{type:"range",min:"1",max:"60",value:i,name:"range",step:"1",onChange:function(t){o(+t.target.value)},className:"settings-timer__slider"}),(0,u.jsx)("button",{type:"button",onClick:function(){p({type:"SET_TIME",payload:i})},className:"btn settings-timer__start",children:"\u0421\u0442\u0430\u0440\u0442"})]})}c.defaultProps={defaultTime:"0"};var i=c,o=n(5861),p=n(7757),f=n.n(p),d=n(5402),l=n(7606);function m(t){var e=t.active,n=t.setActive,r=t.children,a=function(){n(!1)},s=e?"modal active":"modal",c=e?"modal__content active":"modal__content";return(0,u.jsx)("div",{className:s,onClick:a,children:(0,u.jsxs)("div",{className:c,onClick:function(t){t.stopPropagation()},children:[(0,u.jsx)("button",{type:"button",className:"modal__close","aria-label":"Close",onClick:a,children:(0,u.jsx)("span",{"aria-hidden":"true",children:"\xd7"})}),(0,u.jsx)("div",{children:r})]})})}m.defaultProps={active:!1,setActive:function(){}};var v=m;var h=n.p+"static/media/start.929dc31154eeebdffe2b013f9d3f888f.svg";var x=n.p+"static/media/pause.dc02db5188b7b80dc85cbfe8d97bf7a7.svg";var b=n.p+"static/media/stop.5f4ae1d3e5627c95a0b2088248a679e1.svg";var _=n.p+"static/media/reset.196c0e3c39c105f1fa7a25b21f9ecb80.svg";function j(t){var e=t.time,n=t.secondsLeft,c=(0,r.useState)(!0),i=(0,s.Z)(c,2),p=i[0],m=i[1],j=(0,r.useState)(!1),k=(0,s.Z)(j,2),w=k[0],y=k[1],g=(0,r.useState)(!1),Z=(0,s.Z)(g,2),C=Z[0],I=Z[1],N=(0,r.useContext)(d.V).currentUser,T=(0,r.useContext)(a.a).dispatch,E=function(){T({type:"STOP_TIMER"})},S=function(){var t=(0,o.Z)(f().mark((function t(){var r;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=60*e-n,I(!0),t.next=5,(0,l.uM)(N,r);case 5:I(!1),E();case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();function P(t){return t<10?"0".concat(t):t}(0,r.useEffect)((function(){var t=setInterval((function(){p||T({type:"CHANGE_LEFT_TIME",payload:n-1})}),1e3);return 0===n&&clearInterval(t),function(){return clearInterval(t)}}),[p,n]);var J=P(Math.floor(n/60)),M=P(n%60);return(0,u.jsxs)("div",{className:"timer",children:[(0,u.jsx)("div",{className:"timer__time",children:(0,u.jsxs)("span",{children:[J,":",M]})}),(0,u.jsxs)("div",{className:"timer__buttons",children:[(0,u.jsx)("button",{type:"button",className:"timer__btn",onClick:function(){m(!0),T({type:"RESET_TIMER"})},children:(0,u.jsx)("img",{src:_,alt:"Reset"})}),p||!n?(0,u.jsx)("button",{type:"button",className:"timer__btn timer__btn-main",onClick:function(){m(!1)},children:(0,u.jsx)("img",{src:h,alt:"Start"})}):(0,u.jsx)("button",{type:"button",className:"timer__btn timer__btn-main",onClick:function(){m(!0)},children:(0,u.jsx)("img",{src:x,alt:"Pause"})}),(0,u.jsx)("button",{type:"button",className:"timer__btn",onClick:function(){m(!0),y(!0)},children:(0,u.jsx)("img",{src:b,alt:"Stop"})})]}),(0,u.jsxs)(v,{active:w,setActive:y,children:[(0,u.jsx)("span",{className:"modal__title",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0432\u0440\u0435\u043c\u044f \u043c\u0435\u0434\u0438\u0442\u0430\u0446\u0438\u0438?"}),(0,u.jsxs)("div",{className:"modal__buttons",children:[(0,u.jsx)("button",{type:"button",className:"btn btn-dark",disabled:C,onClick:E,children:"\u041d\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u0442\u044c"}),(0,u.jsx)("button",{type:"button",className:"btn",disabled:C,onClick:S,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})]})]})}j.defaultProps={time:"0",secondsLeft:"0"};var k=j;var w=function(){var t=(0,r.useContext)(a.a),e=t.time,n=t.secondsLeft,s=t.showSettings;return(0,u.jsx)("div",{children:s?(0,u.jsx)(i,{defaultTime:e}):(0,u.jsx)(k,{time:e,secondsLeft:n})})}},7606:function(t,e,n){n.d(e,{Oj:function(){return T},Y1:function(){return N},_M:function(){return j},d7:function(){return k},l9:function(){return v},mr:function(){return w},uM:function(){return y},x4:function(){return h}});var r=n(1413),a=n(5861),s=n(7757),u=n.n(s),c=n(2426),i=n(8112),o=n(9062),p=n(4453),f=(0,c.ZF)({apiKey:"AIzaSyBCOUyg80uA_aj8mOTssPlO10HCxPVKCB8",authDomain:"meditation-b02d2.firebaseapp.com",projectId:"meditation-b02d2",storageBucket:"meditation-b02d2.appspot.com",messagingSenderId:"69484463235",appId:"1:69484463235:web:12f03ae9d88e84728587b6"}),d=(0,o.ad)(f),l=(0,i.v0)(),m=(0,p.cF)(),v=function(){var t=(0,a.Z)(u().mark((function t(e,n,r){var a;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,i.Xb)(l,n,r);case 2:return a=t.sent,t.next=5,(0,o.pl)((0,o.JU)(d,"users",a.user.uid),{name:e,email:n,password:r,timeStamp:(0,o.Bt)()});case 5:return t.abrupt("return",a);case 6:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),h=function(){var t=(0,a.Z)(u().mark((function t(e,n){var r;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,i.e5)(l,e,n);case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),x=function(t){var e=t.data();return{id:t.id,number:e.number,name:e.name,thumbnail:e.thumbnail,complete:e.complete}},b=function(){var t=(0,a.Z)(u().mark((function t(e){var n,r;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=[],r=(0,o.IO)((0,o.hJ)(d,"user_progress"),(0,o.ar)("userId","==",e)),t.next=4,(0,o.PL)(r);case 4:return t.sent.forEach((function(t){n.push(t.data().lessonId)})),t.abrupt("return",n);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),_=function(){var t=(0,a.Z)(u().mark((function t(){var e;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=[],t.next=3,(0,o.PL)((0,o.hJ)(d,"lessons"));case 3:return t.sent.forEach((function(t){e.push(x(t))})),t.abrupt("return",e);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),j=function(){var t=(0,a.Z)(u().mark((function t(e){var n,a,s;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_();case 2:return n=t.sent,t.next=5,b(e);case 5:return a=t.sent,(s=n.map((function(t){return a.includes(t.id)?(0,r.Z)((0,r.Z)({},t),{},{complete:!0}):t}))).sort((function(t,e){return t.number>e.number?1:-1})),t.abrupt("return",s);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),k=function(){var t=(0,a.Z)(u().mark((function t(e){var n,r;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=(0,o.JU)(d,"lessons",e),t.next=3,(0,o.QT)(n);case 3:return r=t.sent,t.abrupt("return",r.data());case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),w=function(){var t=(0,a.Z)(u().mark((function t(e,n,r){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,(0,o.ET)((0,o.hJ)(d,"user_progress"),{userId:e,lessonId:n,complete:!0,timeStamp:(0,o.Bt)()});case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),y=function(){var t=(0,a.Z)(u().mark((function t(e,n){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,o.ET)((0,o.hJ)(d,"meditation_time"),{userId:e,seconds:n,timeStamp:(0,o.Bt)()});case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),g=function(t){return(0,o.JU)(d,"users",t)},Z=function(){var t=(0,a.Z)(u().mark((function t(e,n){var r,a;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=(0,p.iH)(m,n),t.next=3,(0,p.KV)(r,e).then((function(t){return(0,p.Jt)(t.ref)})).catch((function(){return""}));case 3:return a=t.sent,t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),C=function(){var t=(0,a.Z)(u().mark((function t(e){var n,r;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=g(e),t.next=3,(0,o.QT)(n);case 3:return r=t.sent,t.abrupt("return",r.data());case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),I=function(){var t=(0,a.Z)(u().mark((function t(e){var n,r;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=0,r=(0,o.IO)((0,o.hJ)(d,"meditation_time"),(0,o.ar)("userId","==",e)),t.next=4,(0,o.PL)(r);case 4:return t.sent.forEach((function(t){n+=t.data().seconds})),n=Math.floor(n/60),t.abrupt("return",n);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),N=function(){var t=(0,a.Z)(u().mark((function t(e){var n,a;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C(e);case 2:return n=t.sent,t.next=5,I(e);case 5:return a=t.sent,t.abrupt("return",(0,r.Z)((0,r.Z)({},n),{},{time:a}));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),T=function(){var t=(0,a.Z)(u().mark((function t(e,n,r){var a,s,c,i,f;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,C(e);case 3:return a=t.sent,s=a.pathPhoto,c=g(e),t.next=8,Z(n,r);case 8:if(i=t.sent){t.next=11;break}return t.abrupt("return","");case 11:return t.next=13,(0,o.r7)(c,{photo:i,pathPhoto:r});case 13:if(!s){t.next=17;break}return f=(0,p.iH)(m,s),t.next=17,(0,p.oq)(f);case 17:return t.abrupt("return",i);case 20:return t.prev=20,t.t0=t.catch(0),t.abrupt("return","");case 23:case"end":return t.stop()}}),t,null,[[0,20]])})));return function(e,n,r){return t.apply(this,arguments)}}()}}]);
//# sourceMappingURL=307.2974cade.chunk.js.map