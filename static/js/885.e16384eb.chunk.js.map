{"version":3,"file":"static/js/885.e16384eb.chunk.js","mappings":"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","sources":["components/errorMessage/ErrorMessage.js","hooks/useFetch.js","resources/icons/lessons/done.svg","resources/icons/lessons/arrow.svg","pages/lessonsList/LessonsList.js","services/firebase.js","utils/setContent.js"],"sourcesContent":["import error from \"../../resources/img/error.png\";\r\nimport \"./errorMessage.scss\";\r\n\r\nfunction ErrorMessage() {\r\n  return (\r\n    <div className=\"error\">\r\n      <img src={error} alt=\"error\" className=\"error__img\" />\r\n      <p className=\"error__text\">Что-то пошло не так...</p>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ErrorMessage;\r\n","import { useState } from \"react\";\r\n\r\nfunction useFetch(callback) {\r\n  const [process, setProcess] = useState(\"loading\");\r\n\r\n  const fetching = async () => {\r\n    setProcess(\"loading\");\r\n    try {\r\n      await callback();\r\n    } catch {\r\n      setProcess(\"error\");\r\n    }\r\n  };\r\n\r\n  return [fetching, process, setProcess];\r\n}\r\n\r\nexport default useFetch;\r\n","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgDone(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title === undefined ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, \"check-circle\") : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    fill: \"#13b48f\",\n    d: \"M21 11.080v0.92c-0.001 2.485-1.009 4.733-2.64 6.362s-3.88 2.634-6.365 2.632-4.734-1.009-6.362-2.64-2.634-3.879-2.633-6.365 1.009-4.733 2.64-6.362 3.88-2.634 6.365-2.633c1.33 0.001 2.586 0.289 3.649 0.775 0.502 0.23 1.096 0.008 1.325-0.494s0.008-1.096-0.494-1.325c-1.327-0.606-2.866-0.955-4.479-0.956-3.037-0.002-5.789 1.229-7.78 3.217s-3.224 4.74-3.226 7.777 1.229 5.789 3.217 7.78 4.739 3.225 7.776 3.226 5.789-1.229 7.78-3.217 3.225-4.739 3.227-7.777v-0.92c0-0.552-0.448-1-1-1s-1 0.448-1 1zM21.293 3.293l-9.293 9.302-2.293-2.292c-0.391-0.391-1.024-0.391-1.414 0s-0.391 1.024 0 1.414l3 3c0.391 0.391 1.024 0.39 1.415 0l10-10.010c0.39-0.391 0.39-1.024-0.001-1.414s-1.024-0.39-1.414 0.001z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgDone);\nexport default __webpack_public_path__ + \"static/media/done.6ce722dbf869e926411368b5ace35ca4.svg\";\nexport { ForwardRef as ReactComponent };","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgArrow(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: 20,\n    height: 20,\n    viewBox: \"0 0 20 20\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title === undefined ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, \"arrow-thin-down\") : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    fill: \"#b6b5b5\",\n    d: \"M9 16.172l-6.071-6.071-1.414 1.414 8.485 8.485 8.485-8.485-1.414-1.414-6.071 6.071v-16.172h-2z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgArrow);\nexport default __webpack_public_path__ + \"static/media/arrow.7ae3534cb807217aac0c976c733cd68b.svg\";\nexport { ForwardRef as ReactComponent };","import { Link } from \"react-router-dom\";\r\nimport { useEffect, useState, useMemo, useContext } from \"react\";\r\n\r\nimport { getAllLessons } from \"../../services/firebase\";\r\nimport useFetch from \"../../hooks/useFetch\";\r\nimport setContent from \"../../utils/setContent\";\r\nimport { AuthContext } from \"../../context/AuthContext\";\r\n\r\nimport \"./lessonsList.scss\";\r\nimport \"./lessonsListMedia.scss\";\r\n\r\nimport doneIcon from \"../../resources/icons/lessons/done.svg\";\r\nimport arrowIcon from \"../../resources/icons/lessons/arrow.svg\";\r\n\r\nfunction LessonsList() {\r\n  const [data, setData] = useState([]);\r\n  const { currentUser } = useContext(AuthContext);\r\n\r\n  const [getLessons, process, setProcess] = useFetch(() =>\r\n    // eslint-disable-next-line no-use-before-define\r\n    getAllLessons(currentUser).then(onDataLoaded),\r\n  );\r\n\r\n  const onDataLoaded = (lessons) => {\r\n    if (lessons) {\r\n      setData(lessons);\r\n      setProcess(\"confirmed\");\r\n    } else {\r\n      setProcess(\"error\");\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    getLessons();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  const completeItem = (complete) => {\r\n    if (complete) {\r\n      return <img src={doneIcon} alt=\"done\" className=\"lesson__done\" />;\r\n    }\r\n    return null;\r\n  };\r\n\r\n  const arrowItem = (countItems, i) => {\r\n    if (countItems - 1 > i) {\r\n      return <img src={arrowIcon} alt=\"arrow\" className=\"lessons__arrow\" />;\r\n    }\r\n    return null;\r\n  };\r\n\r\n  function renderItems(items) {\r\n    const countItems = items.length;\r\n\r\n    const itemsList = items.map(({ id, name, thumbnail, complete }, i) => {\r\n      return (\r\n        <div key={id}>\r\n          <div className=\"lesson\">\r\n            <Link to={`/lessons/${id}`}>\r\n              <img src={thumbnail} alt={name} className=\"lesson__img\" />\r\n              <div className=\"lesson__name\">{name}</div>\r\n              {completeItem(complete)}\r\n            </Link>\r\n          </div>\r\n          {arrowItem(countItems, i)}\r\n        </div>\r\n      );\r\n    });\r\n    return <div className=\"lessons__list\">{itemsList}</div>;\r\n  }\r\n\r\n  const elements = useMemo(() => {\r\n    return setContent(process, () => renderItems(data));\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [process]);\r\n\r\n  return <div className=\"lessons\">{elements}</div>;\r\n}\r\n\r\nexport default LessonsList;\r\n","import { initializeApp } from \"firebase/app\";\r\nimport {\r\n  getAuth,\r\n  createUserWithEmailAndPassword,\r\n  signInWithEmailAndPassword,\r\n} from \"firebase/auth\";\r\nimport {\r\n  getFirestore,\r\n  collection,\r\n  getDocs,\r\n  doc,\r\n  getDoc,\r\n  query,\r\n  where,\r\n  setDoc,\r\n  addDoc,\r\n  updateDoc,\r\n  serverTimestamp,\r\n} from \"firebase/firestore\";\r\nimport {\r\n  getStorage,\r\n  ref,\r\n  uploadBytes,\r\n  getDownloadURL,\r\n  deleteObject,\r\n} from \"firebase/storage\";\r\n\r\nconst firebaseConfig = {\r\n  apiKey: process.env.REACT_APP_API_KEY,\r\n  authDomain: \"meditation-b02d2.firebaseapp.com\",\r\n  projectId: \"meditation-b02d2\",\r\n  storageBucket: \"meditation-b02d2.appspot.com\",\r\n  messagingSenderId: \"69484463235\",\r\n  appId: \"1:69484463235:web:12f03ae9d88e84728587b6\",\r\n};\r\n\r\nconst app = initializeApp(firebaseConfig);\r\nconst db = getFirestore(app);\r\nconst auth = getAuth();\r\nconst storage = getStorage();\r\n\r\n// auth\r\n\r\nexport const registration = async (name, email, password) => {\r\n  const res = await createUserWithEmailAndPassword(auth, email, password);\r\n  await setDoc(doc(db, \"users\", res.user.uid), {\r\n    name,\r\n    email,\r\n    password,\r\n    timeStamp: serverTimestamp(),\r\n  });\r\n  return res;\r\n};\r\n\r\nexport const login = async (email, password) => {\r\n  const res = await signInWithEmailAndPassword(auth, email, password);\r\n  return res;\r\n};\r\n\r\n// lessons\r\n\r\nconst getDataLesson = (dataLesson) => {\r\n  const lesson = dataLesson.data();\r\n  return {\r\n    id: dataLesson.id,\r\n    number: lesson.number,\r\n    name: lesson.name,\r\n    thumbnail: lesson.thumbnail,\r\n    complete: lesson.complete,\r\n  };\r\n};\r\n\r\nconst getCompleteLessons = async (userId) => {\r\n  const lessons = [];\r\n\r\n  const progressQuery = query(\r\n    collection(db, \"user_progress\"),\r\n    where(\"userId\", \"==\", userId),\r\n  );\r\n  const userProgress = await getDocs(progressQuery);\r\n\r\n  userProgress.forEach((data) => {\r\n    lessons.push(data.data().lessonId);\r\n  });\r\n\r\n  return lessons;\r\n};\r\n\r\nconst getLessons = async () => {\r\n  const list = [];\r\n  const lessons = await getDocs(collection(db, \"lessons\"));\r\n  lessons.forEach((data) => {\r\n    list.push(getDataLesson(data));\r\n  });\r\n\r\n  return list;\r\n};\r\n\r\nexport const getAllLessons = async (userId) => {\r\n  const lessons = await getLessons();\r\n  const completeLessons = await getCompleteLessons(userId);\r\n  const list = lessons.map((lesson) => {\r\n    if (completeLessons.includes(lesson.id)) {\r\n      return { ...lesson, complete: true };\r\n    }\r\n    return lesson;\r\n  });\r\n\r\n  list.sort((a, b) => (a.number > b.number ? 1 : -1));\r\n  return list;\r\n};\r\n\r\nexport const getLesson = async (id) => {\r\n  const docRef = doc(db, \"lessons\", id);\r\n  const docSnap = await getDoc(docRef);\r\n  return docSnap.data();\r\n};\r\n\r\nexport const setCompleteLesson = async (userId, lessonId, complete) => {\r\n  if (complete) {\r\n    return;\r\n  }\r\n\r\n  await addDoc(collection(db, \"user_progress\"), {\r\n    userId,\r\n    lessonId,\r\n    complete: true,\r\n    timeStamp: serverTimestamp(),\r\n  });\r\n};\r\n\r\n// timer\r\n\r\nexport const saveMeditationTime = async (userId, seconds) => {\r\n  await addDoc(collection(db, \"meditation_time\"), {\r\n    userId,\r\n    seconds,\r\n    timeStamp: serverTimestamp(),\r\n  });\r\n};\r\n\r\n// user data\r\n\r\nconst getUserRef = (userId) => {\r\n  return doc(db, \"users\", userId);\r\n};\r\n\r\nexport const uploadFile = async (file, name) => {\r\n  const storageRef = ref(storage, name);\r\n  const url = await uploadBytes(storageRef, file)\r\n    .then((res) => getDownloadURL(res.ref))\r\n    .catch(() => {\r\n      return \"\";\r\n    });\r\n  return url;\r\n};\r\n\r\nexport const getUserData = async (userId) => {\r\n  const userRef = getUserRef(userId);\r\n  const docSnap = await getDoc(userRef);\r\n  return docSnap.data();\r\n};\r\n\r\nexport const meditationTime = async (userId) => {\r\n  let time = 0;\r\n\r\n  const timeQuery = query(\r\n    collection(db, \"meditation_time\"),\r\n    where(\"userId\", \"==\", userId),\r\n  );\r\n  const userTime = await getDocs(timeQuery);\r\n\r\n  userTime.forEach((data) => {\r\n    time += data.data().seconds;\r\n  });\r\n\r\n  // convert sec to min\r\n  time = Math.floor(time / 60);\r\n\r\n  return time;\r\n};\r\n\r\nexport const allUserData = async (userId) => {\r\n  const dataUser = await getUserData(userId);\r\n  const time = await meditationTime(userId);\r\n\r\n  return { ...dataUser, time };\r\n};\r\n\r\nexport const changeUserPhoto = async (userId, file, name) => {\r\n  try {\r\n    const { pathPhoto } = await getUserData(userId);\r\n    const userRef = getUserRef(userId);\r\n\r\n    // upload user photo to storage\r\n    const url = await uploadFile(file, name);\r\n    if (!url) {\r\n      return \"\";\r\n    }\r\n\r\n    // set the photo url and path to data user\r\n    await updateDoc(userRef, {\r\n      photo: url,\r\n      pathPhoto: name,\r\n    });\r\n\r\n    // remove old photo\r\n    if (pathPhoto) {\r\n      const oldPhotoRef = ref(storage, pathPhoto);\r\n      await deleteObject(oldPhotoRef);\r\n    }\r\n    return url;\r\n  } catch {\r\n    return \"\";\r\n  }\r\n};\r\n","import Spinner from \"../components/spinner/Spinner\";\r\nimport ErrorMessage from \"../components/errorMessage/ErrorMessage\";\r\n\r\nconst setContent = (process, Component, data) => {\r\n  switch (process) {\r\n    case \"loading\":\r\n      return <Spinner />;\r\n    case \"confirmed\":\r\n      return <Component data={data} />;\r\n    case \"error\":\r\n      return <ErrorMessage />;\r\n    default:\r\n      throw new Error(\"Unexpected process state\");\r\n  }\r\n};\r\n\r\nexport default setContent;\r\n"],"names":["className","src","error","alt","callback","useState","process","setProcess","fetching","data","setData","currentUser","useContext","AuthContext","useFetch","getAllLessons","then","onDataLoaded","getLessons","lessons","useEffect","completeItem","complete","doneIcon","arrowItem","countItems","i","arrowIcon","elements","useMemo","setContent","items","length","itemsList","map","id","name","thumbnail","to","renderItems","app","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","db","getFirestore","auth","getAuth","storage","getStorage","registration","email","password","createUserWithEmailAndPassword","res","setDoc","doc","user","uid","timeStamp","serverTimestamp","login","signInWithEmailAndPassword","getDataLesson","dataLesson","lesson","number","getCompleteLessons","userId","progressQuery","query","collection","where","getDocs","forEach","push","lessonId","list","completeLessons","includes","sort","a","b","getLesson","docRef","getDoc","docSnap","setCompleteLesson","addDoc","saveMeditationTime","seconds","getUserRef","uploadFile","file","storageRef","ref","uploadBytes","getDownloadURL","catch","url","getUserData","userRef","meditationTime","time","timeQuery","Math","floor","allUserData","dataUser","changeUserPhoto","pathPhoto","updateDoc","photo","oldPhotoRef","deleteObject","Component","Error"],"sourceRoot":""}